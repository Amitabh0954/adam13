")
print("
print(file_content.strip())

# Folder: backend/product_catalog_management/controllers/
# Update file: product_controller.py to include search product route
file_content = 
# Epic Title: Product Catalog Management

from flask import Blueprint, request, jsonify
from backend.product_catalog_management.services.product_service import ProductService
from backend.product_catalog_management.services.search_service import SearchService

product_blueprint = Blueprint('product', __name__)
product_service = ProductService()
search_service = SearchService()

@product_blueprint.route('/add', methods=['POST'])
def add_product():
    data = request.json
    name = data.get('name')
    price = data.get('price')
    description = data.get('description')
    
    try:
        product = product_service.add_new_product(name, price, description)
        return jsonify({'message': 'Product added successfully', 'product': product.name}), 201
    except ValueError as e:
        return jsonify({'error': str(e)}), 400

@product_blueprint.route('/update/<int:product_id>', methods=['PUT'])
def update_product(product_id):
    data = request.json
    name = data.get('name')
    price = data.get('price')
    description = data.get('description')

    try:
        product = product_service.update_product(product_id, name, price, description)
        return jsonify({'message': 'Product updated successfully', 'product': product.name}), 200
    except ValueError as e:
        return jsonify({'error': str(e)}), 400

@product_blueprint.route('/delete/<int:product_id>', methods=['DELETE'])
def delete_product(product_id):
    try:
        product_service.delete_product(product_id)
        return jsonify({'message': 'Product deleted successfully'}), 200
    except ValueError as e:
        return jsonify({'error': str(e)}), 400

@product_blueprint.route('/search', methods=['GET'])
def search_products():
    query = request.args.get('query')
    page = int(request.args.get('page', 1))
    per_page = int(request.args.get('per_page', 10))

    products = search_service.search_products(query, page, per_page)
    return jsonify({'products': [product.name for product in products]}), 200


memory_ledger["emitted_file_paths"].append("backend/product_catalog_management/controllers/product_controller.py")
memory_ledger["folder_file_mapping"]["backend/product_catalog_management/controllers/"] = ["product_controller.py"]

print("